#!/bin/bash

###############################################################################
#                                                                             #
#  ๐ Marolyx GitHub Upload Script                                          #
#  ุชุทุจูู ุฃุฏูุงุช ุงูุฃูุนุงุจ - ุณูุฑูุจุช ุงูุฑูุน ุนูู GitHub                           #
#                                                                             #
#  ุงูุงุณุชุฎุฏุงู: bash upload-to-github.sh                                      #
#                                                                             #
###############################################################################

# ุงูุฃููุงู
RED='\033[0;31m'
GREEN='\033[0;32m'
YELLOW='\033[1;33m'
BLUE='\033[0;34m'
NC='\033[0m' # No Color

# ุฏุงูุฉ ุงูุทุจุงุนุฉ ุงูููููุฉ
print_header() {
    echo -e "${BLUE}โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ${NC}"
    echo -e "${BLUE}  $1${NC}"
    echo -e "${BLUE}โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ${NC}"
}

print_success() {
    echo -e "${GREEN}โ $1${NC}"
}

print_error() {
    echo -e "${RED}โ $1${NC}"
}

print_warning() {
    echo -e "${YELLOW}โ๏ธ  $1${NC}"
}

print_info() {
    echo -e "${BLUE}โน๏ธ  $1${NC}"
}

###############################################################################
# ุงูุฎุทูุฉ 1: ุงูุชุญูู ูู Git
###############################################################################

print_header "ุงูุฎุทูุฉ 1: ุงูุชุญูู ูู Git"

if ! command -v git &> /dev/null
then
    print_error "Git ุบูุฑ ูุซุจุช!"
    print_info "ูู ุจุงูุชุซุจูุช: pkg install git"
    exit 1
fi

print_success "Git ูุซุจุช"
git --version

###############################################################################
# ุงูุฎุทูุฉ 2: ุฌูุน ุงูุจูุงูุงุช ูู ุงููุณุชุฎุฏู
###############################################################################

print_header "ุงูุฎุทูุฉ 2: ุฅุฏุฎุงู ุจูุงูุงุช GitHub"

echo -e "${YELLOW}ุงุชุฑู ุงูุญููู ูุงุฑุบุฉ ูุงุณุชุฎุฏุงู ุงูููู ุงูุญุงููุฉ${NC}\n"

# ุงุณู ุงููุณุชุฎุฏู
read -p "ุงุณู ูุณุชุฎุฏู GitHub (ุฃู ุงุถุบุท Enter ูุชุฎุทู): " USERNAME

# ุงูุจุฑูุฏ ุงูุฅููุชุฑููู
read -p "ุงูุจุฑูุฏ ุงูุฅููุชุฑููู (ุฃู ุงุถุบุท Enter ูุชุฎุทู): " EMAIL

# ุงุณู ุงููุณุชูุฏุน
read -p "ุงุณู ุงููุณุชูุฏุน [Games-Tools-Android]: " REPO_NAME
REPO_NAME=${REPO_NAME:-"Games-Tools-Android"}

###############################################################################
# ุงูุฎุทูุฉ 3: ุฅุนุฏุงุฏ Git
###############################################################################

if [ ! -z "$USERNAME" ] || [ ! -z "$EMAIL" ]; then
    print_header "ุงูุฎุทูุฉ 3: ุฅุนุฏุงุฏ ุจูุงูุงุช Git"
    
    if [ ! -z "$USERNAME" ]; then
        git config --global user.name "$USERNAME"
        print_success "ุชู ุชุนููู ุงุณู ุงููุณุชุฎุฏู: $USERNAME"
    fi
    
    if [ ! -z "$EMAIL" ]; then
        git config --global user.email "$EMAIL"
        print_success "ุชู ุชุนููู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู: $EMAIL"
    fi
else
    print_info "ุงุณุชุฎุฏุงู ุงูุจูุงูุงุช ุงูุญุงููุฉ"
fi

###############################################################################
# ุงูุฎุทูุฉ 4: ุงูุชุญูู ูู ุงููุณุชูุฏุน ุงููุญูู
###############################################################################

print_header "ุงูุฎุทูุฉ 4: ุงูุชุญูู ูู ุงููุณุชูุฏุน ุงููุญูู"

if [ ! -d ".git" ]; then
    print_warning "ูู ูุชู ุงูุนุซูุฑ ุนูู ูุณุชูุฏุน ูุญูู. ุฌุงุฑู ุงูุฅูุดุงุก..."
    git init
    print_success "ุชู ุฅูุดุงุก ูุณุชูุฏุน ูุญูู"
else
    print_success "ูุณุชูุฏุน ูุญูู ููุฌูุฏ"
fi

###############################################################################
# ุงูุฎุทูุฉ 5: ุฅุถุงูุฉ ุงููููุงุช
###############################################################################

print_header "ุงูุฎุทูุฉ 5: ุฅุถุงูุฉ ุงููููุงุช"

print_info "ุฌุงุฑู ุฅุถุงูุฉ ุงููููุงุช..."
git add .

if [ $? -eq 0 ]; then
    print_success "ุชู ุฅุถุงูุฉ ุฌููุน ุงููููุงุช"
else
    print_error "ูุดู ุฅุถุงูุฉ ุงููููุงุช"
    exit 1
fi

###############################################################################
# ุงูุฎุทูุฉ 6: Commit
###############################################################################

print_header "ุงูุฎุทูุฉ 6: Commit"

read -p "ุฑุณุงูุฉ Commit [Initial commit: Marolyx Games Tools]: " COMMIT_MSG
COMMIT_MSG=${COMMIT_MSG:-"Initial commit: Marolyx Games Tools Android App"}

git commit -m "$COMMIT_MSG"

if [ $? -eq 0 ]; then
    print_success "ุชู Commit ุจูุฌุงุญ"
else
    print_warning "ูุง ุชูุฌุฏ ุชุบููุฑุงุช ุฌุฏูุฏุฉ"
fi

###############################################################################
# ุงูุฎุทูุฉ 7: ุชุนููู ุงููุฑุน ุงูุฑุฆูุณู
###############################################################################

print_header "ุงูุฎุทูุฉ 7: ุชุนููู ุงููุฑุน ุงูุฑุฆูุณู"

git branch -M main
print_success "ุชู ุชุนููู ุงููุฑุน ุฅูู main"

###############################################################################
# ุงูุฎุทูุฉ 8: ุฑุจุท ูุน GitHub
###############################################################################

print_header "ุงูุฎุทูุฉ 8: ุฑุจุท ูุน GitHub"

if [ -z "$USERNAME" ]; then
    read -p "ุงุณู ูุณุชุฎุฏู GitHub (ูุทููุจ): " USERNAME
fi

GITHUB_URL="https://github.com/${USERNAME}/${REPO_NAME}.git"

print_info "ุงูุฑุงุจุท: $GITHUB_URL"

# ุชุญูู ุฅุฐุง ูุงู ููุงู remote ููุฌูุฏ
if git remote | grep -q origin; then
    print_warning "ููุงู remote ููุฌูุฏ ุจุงููุนู. ุฌุงุฑู ุงูุชุญุฏูุซ..."
    git remote remove origin
fi

git remote add origin "$GITHUB_URL"
print_success "ุชู ุฑุจุท ุงููุณุชูุฏุน"

###############################################################################
# ุงูุฎุทูุฉ 9: ุงูุฑูุน ุนูู GitHub
###############################################################################

print_header "ุงูุฎุทูุฉ 9: ุงูุฑูุน ุนูู GitHub"

print_info "ุฌุงุฑู ุงูุฑูุน..."
print_warning "ูุฏ ูุทูุจ ููู ุฅุฏุฎุงู ุจูุงูุงุช ุงููุตุงุฏูุฉ"
print_info "ุงุณุชุฎุฏู Personal Access Token ุจุฏูุงู ูู ูููุฉ ุงููุฑูุฑ"

git push -u origin main

if [ $? -eq 0 ]; then
    print_success "ุชู ุงูุฑูุน ุจูุฌุงุญ! ๐"
else
    print_error "ูุดู ุงูุฑูุน"
    print_info "ุชุญูู ูู:"
    print_info "1. ุงูุงุชุตุงู ุจุงูุฅูุชุฑูุช"
    print_info "2. ุงุณู ุงููุณุชุฎุฏู ุตุญูุญ"
    print_info "3. ุงุณุชุฎุฏูุช Personal Access Token"
    exit 1
fi

###############################################################################
# ุงูุฎุทูุฉ 10: ุงูุชุญูู ุงูููุงุฆู
###############################################################################

print_header "ุงูุฎุทูุฉ 10: ุงูุชุญูู ุงูููุงุฆู"

git log --oneline | head -5

print_success "ุงูุชูู ุงูุฑูุน ุจูุฌุงุญ!"
print_info "ุงูุฑุงุจุท: https://github.com/${USERNAME}/${REPO_NAME}"

echo ""
print_header "๐ ูุฌุญ ุงูุฑูุน ุจูุฌุงุญ!"

echo -e "${GREEN}"
echo "ุงุฐูุจ ุฅูู: https://github.com/${USERNAME}/${REPO_NAME}"
echo "ุณุชุฑู ุฌููุน ูููุงุช ุงููุดุฑูุน ููุงู!"
echo -e "${NC}"
